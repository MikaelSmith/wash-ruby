<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Wash::Entry - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-attributes">::attributes</a>
    
    <li ><a href="#method-c-is_singleton">::is_singleton</a>
    
    <li ><a href="#method-c-label">::label</a>
    
    <li ><a href="#method-c-meta_attribute_schema">::meta_attribute_schema</a>
    
    <li ><a href="#method-c-metadata_schema">::metadata_schema</a>
    
    <li ><a href="#method-c-parent_of">::parent_of</a>
    
    <li ><a href="#method-c-slash_replacer">::slash_replacer</a>
    
    <li ><a href="#method-c-state">::state</a>
    
    <li ><a href="#method-i-cache_ttls">#cache_ttls</a>
    
    <li ><a href="#method-i-prefetch">#prefetch</a>
    
    <li ><a href="#method-i-schema">#schema</a>
    
    <li ><a href="#method-i-to_json">#to_json</a>
    
    <li ><a href="#method-i-type_id">#type_id</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Wash::Entry">
  <h1 id="class-Wash::Entry" class="class">
    class Wash::Entry
  </h1>

  <section class="description">
    
<p><a href="Entry.html"><code>Entry</code></a> represents a common base class for <a href="../Wash.html"><code>Wash</code></a> entries. All plugin entries should extend this class.</p>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-name" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">name</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>All entries have a name</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-attributes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">attributes</span><span
            class="method-args">(attr, *attrs)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>attributes is a class-level tag specifying all the attributes that make sense for instances of this specific kind of entry. It will pass the specified attributes along to attr_accessor so that instances can set their values. For example, something like</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Foo</span>
  <span class="ruby-identifier">attributes</span> <span class="ruby-value">:mtime</span>, <span class="ruby-value">:meta</span>
<span class="ruby-keyword">end</span>
</pre>

<p>indicates that instances of Foo will set the mtime and meta attributes.</p>

<p>@param [Symbol] attr An attribute that will be set @param [Symbol] attrs More attributes that will be set</p>
          
          

          
          <div class="method-source-code" id="attributes-source">
            <pre><span class="ruby-comment"># File lib/wash/entry.rb, line 22</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">attributes</span>(<span class="ruby-identifier">attr</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">attrs</span>)
  <span class="ruby-ivar">@attributes</span> <span class="ruby-operator">||=</span> []
  <span class="ruby-ivar">@attributes</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">set_fields</span>(<span class="ruby-identifier">attr</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">attrs</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-is_singleton" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_singleton</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Entry.html#method-c-is_singleton"><code>is_singleton</code></a> is a class-level tag indicating that the given Entry&#39;s a singleton. It is a helper for <a href="Entry.html"><code>Entry</code></a> schemas.</p>
          
          

          
          <div class="method-source-code" id="is_singleton-source">
            <pre><span class="ruby-comment"># File lib/wash/entry.rb, line 80</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">is_singleton</span>
  <span class="ruby-ivar">@singleton</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-label" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">label</span><span
            class="method-args">(l)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>label is a class-level tag specifying the entry&#39;s label. It is a helper for <a href="Entry.html"><code>Entry</code></a> schemas.</p>

<p>@param l The label.</p>
          
          

          
          <div class="method-source-code" id="label-source">
            <pre><span class="ruby-comment"># File lib/wash/entry.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">label</span>(<span class="ruby-identifier">l</span>)
  <span class="ruby-ivar">@label</span> = <span class="ruby-identifier">l</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-meta_attribute_schema" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">meta_attribute_schema</span><span
            class="method-args">(schema)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Entry.html#method-c-meta_attribute_schema"><code>meta_attribute_schema</code></a> sets the meta attribute&#39;s schema to schema. It is a helper for <a href="Entry.html"><code>Entry</code></a> schemas.</p>

<p>@param schema A hash containing the meta attribute&#39;s JSON schema</p>
          
          

          
          <div class="method-source-code" id="meta_attribute_schema-source">
            <pre><span class="ruby-comment"># File lib/wash/entry.rb, line 88</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">meta_attribute_schema</span>(<span class="ruby-identifier">schema</span>)
  <span class="ruby-ivar">@meta_attribute_schema</span> = <span class="ruby-identifier">schema</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-metadata_schema" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">metadata_schema</span><span
            class="method-args">(schema)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Entry.html#method-c-metadata_schema"><code>metadata_schema</code></a> sets the metadata schema to schema. It is a helper for <a href="Entry.html"><code>Entry</code></a> schemas.</p>

<p>@param schema A hash containing the metadata&#39;s JSON schema</p>
          
          

          
          <div class="method-source-code" id="metadata_schema-source">
            <pre><span class="ruby-comment"># File lib/wash/entry.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">metadata_schema</span>(<span class="ruby-identifier">schema</span>)
  <span class="ruby-ivar">@metadata_schema</span> = <span class="ruby-identifier">schema</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-parent_of" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parent_of</span><span
            class="method-args">(child_klass, *child_klasses)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Entry.html#method-c-parent_of"><code>parent_of</code></a> indicates that this kind of <a href="Entry.html"><code>Entry</code></a> is the parent of the given child classes (i.e. child entries). It is a helper for <a href="Entry.html"><code>Entry</code></a> schemas. For example, something like</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Foo</span>
  <span class="ruby-identifier">parent_of</span> <span class="ruby-string">&#39;Bar&#39;</span>, <span class="ruby-string">&#39;Baz&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>indicates that Foo#list will return instances of Bar and Baz entries.</p>

<p>@param [Wash::Entry] child_klass A child class object. @param [Wash::Entry] child_klasses More child class objects.</p>
          
          

          
          <div class="method-source-code" id="parent_of-source">
            <pre><span class="ruby-comment"># File lib/wash/entry.rb, line 111</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">parent_of</span>(<span class="ruby-identifier">child_klass</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">child_klasses</span>)
  <span class="ruby-ivar">@child_klasses</span> <span class="ruby-operator">||=</span> []
  <span class="ruby-ivar">@child_klasses</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">child_klass</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">child_klasses</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-slash_replacer" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">slash_replacer</span><span
            class="method-args">(char)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Entry.html#method-c-slash_replacer"><code>slash_replacer</code></a> is a class-level tag that specifies the slash replacer. It should only be used if there is a chance that instances of the given class can contain a “#” in their names. Otherwise, <a href="Entry.html#method-c-slash_replacer"><code>slash_replacer</code></a> should be ignored.</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Foo</span>
  <span class="ruby-identifier">slash_replacer</span> <span class="ruby-string">&quot;:&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>tells <a href="../Wash.html"><code>Wash</code></a> to replace all “/”es in a given Foo instance&#39;s name with the “:” character.</p>

<p>@param [String] char The slash replacer</p>
          
          

          
          <div class="method-source-code" id="slash_replacer-source">
            <pre><span class="ruby-comment"># File lib/wash/entry.rb, line 42</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">slash_replacer</span>(<span class="ruby-identifier">char</span>)
  <span class="ruby-ivar">@slash_replacer</span> = <span class="ruby-identifier">char</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-state" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">state</span><span
            class="method-args">(field, *fields)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>state is a class-level tag that specifies the minimum state required to reconstruct all instances of this specific kind of entry. Each specified state field will be passed along to attr_accessor so that instances can get/set their values. For example, something like</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Foo</span>
  <span class="ruby-identifier">state</span> <span class="ruby-value">:api_key</span>
<span class="ruby-keyword">end</span>
</pre>

<p>indicates that api_key is the minimum state required to reconstruct instances of Foo. The gem will serialize the api_key as part of each instance&#39;s state key when passing them along to <a href="../Wash.html"><code>Wash</code></a>. If <a href="../Wash.html"><code>Wash</code></a> invokes a method on a specific instance, then <a href="../Wash.html#method-c-run"><code>Wash.run</code></a> will restore the api_key prior to invoking the method. Thus, plugin authors do not have to manage their entries&#39; states; the gem will do it for them via the state tag.</p>

<p>Note that <a href="../Wash.html#method-c-run"><code>Wash.run</code></a> uses Class::allocate when it reconstructs the entries, so it does not call the initialize method.</p>
          
          

          
          <div class="method-source-code" id="state-source">
            <pre><span class="ruby-comment"># File lib/wash/entry.rb, line 65</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">state</span>(<span class="ruby-identifier">field</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">fields</span>)
  <span class="ruby-ivar">@state</span> <span class="ruby-operator">||=</span> []
  <span class="ruby-ivar">@state</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">set_fields</span>(<span class="ruby-identifier">field</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">fields</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-cache_ttls" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cache_ttls</span><span
            class="method-args">(ttls = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Entry.html#method-i-cache_ttls"><code>cache_ttls</code></a> sets the cache TTLs (time-to-live) of the given methods.</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Foo</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">content_size</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">content_size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">10000</span>
      <span class="ruby-identifier">cache_ttls</span> <span class="ruby-value">read:</span> <span class="ruby-value">100</span> 
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>In the above example, if content_size &gt; 10000, then the gem tells <a href="../Wash.html"><code>Wash</code></a> to cache that instance&#39;s read result for 100 seconds.</p>
          
          

          
          <div class="method-source-code" id="cache_ttls-source">
            <pre><span class="ruby-comment"># File lib/wash/entry.rb, line 254</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cache_ttls</span>(<span class="ruby-identifier">ttls</span> = {})
  <span class="ruby-ivar">@cache_ttls</span> <span class="ruby-operator">||=</span> {}
  <span class="ruby-ivar">@cache_ttls</span> = <span class="ruby-ivar">@cache_ttls</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">ttls</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-prefetch" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">prefetch</span><span
            class="method-args">(method, *methods)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>prefetch indicates that the given methods should be prefetched. This means that the gem will invoke those methods on this particular entry instance and include their results when serializing that entry. Note that the methods are invoked during serialization.</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Foo</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">content_size</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">content_size</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">10</span>
      <span class="ruby-identifier">prefetch</span> <span class="ruby-value">:list</span>, <span class="ruby-value">:read</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>In the above example, if content_size &lt; 10, then the gem will invoke Foo#list and Foo#read on the given Foo instance during its serialization.</p>

<p>@param [Symbol] method A method that should be prefetched. @param [Symbol] methods More methods that should be prefetched.</p>
          
          

          
          <div class="method-source-code" id="prefetch-source">
            <pre><span class="ruby-comment"># File lib/wash/entry.rb, line 237</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">prefetch</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">methods</span>)
  <span class="ruby-identifier">prefetched_methods</span>.<span class="ruby-identifier">concat</span>([<span class="ruby-identifier">method</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">methods</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-schema" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">schema</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>schema returns the entry&#39;s schema. It should not be overridden.</p>
          
          

          
          <div class="method-source-code" id="schema-source">
            <pre><span class="ruby-comment"># File lib/wash/entry.rb, line 260</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">schema</span>
  <span class="ruby-identifier">schemaHash</span> = {}
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:schema</span>, <span class="ruby-identifier">schemaHash</span>)
  <span class="ruby-identifier">schemaHash</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_json" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_json</span><span
            class="method-args">(*)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="to_json-source">
            <pre><span class="ruby-comment"># File lib/wash/entry.rb, line 173</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">to_json</span>(<span class="ruby-operator">*</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@name</span> <span class="ruby-operator">&amp;&amp;</span>  <span class="ruby-ivar">@name</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;A nameless entry is being serialized. The entry is an instance of #{type_id}&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">hash</span> = {
    <span class="ruby-value">type_id:</span> <span class="ruby-identifier">type_id</span>,
    <span class="ruby-value">name:</span> <span class="ruby-ivar">@name</span>,
  }

  <span class="ruby-comment"># Include the methods</span>
  <span class="ruby-identifier">hash</span>[<span class="ruby-value">:methods</span>] = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:methods</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">prefetched_methods</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">method</span>)
      [<span class="ruby-identifier">method</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">method</span>)]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">method</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Include the remaining keys. Note that these checks are here to</span>
  <span class="ruby-comment"># ensure that we don&#39;t serialize empty keys. They&#39;re meant to save</span>
  <span class="ruby-comment"># some space.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">attributes_hash</span> = <span class="ruby-identifier">to_hash</span>(<span class="ruby-identifier">attributes</span>))
    <span class="ruby-identifier">hash</span>[<span class="ruby-value">:attributes</span>] = <span class="ruby-identifier">attributes_hash</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">cache_ttls</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">hash</span>[<span class="ruby-value">:cache_ttls</span>] = <span class="ruby-identifier">cache_ttls</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">slash_replacer</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">hash</span>[<span class="ruby-value">:slash_replacer</span>] = <span class="ruby-identifier">slash_replacer</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">hash</span>[<span class="ruby-value">:state</span>] = <span class="ruby-identifier">to_hash</span>(<span class="ruby-identifier">state</span>).<span class="ruby-identifier">merge</span>(<span class="ruby-value">klass:</span> <span class="ruby-identifier">type_id</span>, <span class="ruby-value">name:</span> <span class="ruby-ivar">@name</span>).<span class="ruby-identifier">to_json</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Wash</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:pretty_print?</span>)
    <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">pretty_generate</span>(<span class="ruby-identifier">hash</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">hash</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-type_id" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">type_id</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Entry.html#method-i-type_id"><code>type_id</code></a> returns the entry&#39;s type ID, which is its fully-qualified class name.</p>
          
          

          
          <div class="method-source-code" id="type_id-source">
            <pre><span class="ruby-comment"># File lib/wash/entry.rb, line 214</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">type_id</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:type_id</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

